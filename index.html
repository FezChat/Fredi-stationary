<!DOCTYPE html>
<html lang="sw">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Fred's Stationary ‚Äî Vifaa vya Ofisi Bora</title>
  <meta name="description" content="Vifaa bora vya ofisi na shule ‚Äî Kalamu, Vitabu, Vifaa vya Ofisi na Vifaa vya Kuchapisha. Bei nafuu, huduma ya haraka.">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    /* Modern, opinionated reset + design tokens */
    :root{
      --bg: #0f1723;
      --card: #0b1220;
      --muted: #94a3b8;
      --accent: #06b6d4;
      --accent-2: #7c3aed;
      --success: #10b981;
      --danger: #ef4444;
      --glass: rgba(255,255,255,0.04);
      --radius: 12px;
      --container: 1200px;
      --gap: 1.25rem;
      color-scheme: light dark;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg: #f7fbff;
        --card: #fff;
        --muted:#5b6b7a;
        --glass: rgba(0,0,0,0.03);
      }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,var(--bg), color-mix(in srgb, var(--bg) 95%, transparent));
      color:var(--muted);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
      font-size:clamp(14px, 1.5vw, 16px);
    }

    .container{max-width:var(--container);margin:0 auto;padding:1rem;}

    header{position:sticky;top:0;z-index:60;background:transparent;padding:0.75rem 0;backdrop-filter: blur(6px);}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:var(--gap)}
    .brand{display:flex;align-items:center;gap:.75rem}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;color:white;font-weight:700}
    .brand h1{font-size:1rem;color:var(--muted);margin:0}
    nav{display:flex;gap:12px;align-items:center}
    .nav-links{display:flex;gap:8px;list-style:none;padding:0;margin:0}
    .nav-links a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px;font-weight:600}
    .nav-links a:hover, .nav-links a:focus{background:var(--glass);color:var(--accent)}

    .actions{display:flex;gap:10px;align-items:center}
    .btn{border:0;padding:.5rem .75rem;border-radius:10px;cursor:pointer;background:transparent;color:var(--muted);font-weight:600}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;box-shadow:0 6px 20px -10px color-mix(in srgb, var(--accent) 30%, transparent)}
    .icon{width:36px;height:36px;border-radius:8px;display:grid;place-items:center;background:var(--glass);}
    .cart-badge{position:relative}
    .cart-count{position:absolute;top:-6px;right:-6px;background:var(--danger);color:white;border-radius:999px;padding:2px 6px;font-size:12px}

    /* Hero */
    .hero{display:grid;grid-template-columns:1fr;gap:1.25rem;align-items:center;padding:3.5rem 0}
    .hero-inner{display:grid;grid-template-columns:1fr;gap:1rem}
    .eyebrow{color:var(--accent);font-weight:700;text-transform:uppercase;letter-spacing:.08em;font-size:.8rem}
    h2.title{font-size:clamp(1.6rem,4vw,2.4rem);margin:0;color:color-mix(in srgb, var(--muted) 80%, black)}
    p.lead{margin:0;color:var(--muted)}

    .hero-media{border-radius:var(--radius);overflow:hidden;background:linear-gradient(180deg,rgba(7,10,17,.25),rgba(7,10,17,.5));min-height:240px}
    .hero-media img{width:100%;height:100%;object-fit:cover;display:block}

    .categories{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin:1rem 0}
    .card{background:var(--card);border-radius:12px;padding:1rem;color:var(--muted);box-shadow:0 8px 30px rgba(2,6,23,0.35);overflow:hidden}
    .card h3{margin:0 0 .5rem;color:inherit}
    .card .thumb{height:140px;border-radius:8px;background-size:cover;background-position:center;margin-bottom:.75rem}

    .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
    .product{display:flex;flex-direction:column;gap:.5rem;padding:1rem;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
    .product .img{height:160px;border-radius:10px;background:#081124;background-size:cover;background-position:center}
    .product h4{margin:0;color:var(--muted)}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .price{color:var(--accent);font-weight:700}

    .admin-panel{position:fixed;right:18px;bottom:18px;background:var(--card);border-radius:14px;padding:12px;box-shadow:0 12px 40px rgba(2,6,23,.6);min-width:320px;max-width:420px}
    footer{margin-top:2rem;border-top:1px solid rgba(255,255,255,0.03);padding:2rem 0;color:var(--muted)}

    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    @media(min-width:900px){
      .hero{grid-template-columns:1fr 420px}
      .hero-media{min-height:360px}
    }

    @media (prefers-reduced-motion:reduce){*{animation:none;transition:none!important}}
  </style>
</head>
<body>
  <header class="container">
    <div class="topbar">
      <div class="brand" aria-label="Fred's Stationary">
        <div class="logo" aria-hidden="true">FL</div>
        <div>
          <h1>Fred's Stationary</h1>
          <div class="sr-only">Vifaa vya Ofisi na Shule ‚Äî Dar es Salaam</div>
        </div>
      </div>

      <nav aria-label="Primary navigation">
        <ul class="nav-links">
          <li><a href="#home" data-key="home">Nyumbani</a></li>
          <li><a href="#products" data-key="products">Bidhaa</a></li>
          <li><a href="#categories" data-key="categories">Kategoria</a></li>
          <li><a href="#about" data-key="about">Kuhusu Sisi</a></li>
          <li><a href="#contact" data-key="contact">Mawasiliano</a></li>
        </ul>
      </nav>

      <div class="actions">
        <div>
          <label for="lang-select" class="sr-only">Chagua Lugha</label>
          <select id="lang-select" aria-label="Chagua Lugha">
            <option value="sw">SW</option>
            <option value="en">EN</option>
            <option value="fr">FR</option>
          </select>
        </div>

        <button class="btn" id="admin-toggle" aria-expanded="false" title="Open admin">
          <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
        </button>

        <div class="cart-badge" style="position:relative">
          <button class="btn" id="cart-btn" aria-label="Open cart">
            <span class="icon" aria-hidden="true">üõí</span>
          </button>
          <div class="cart-count" aria-hidden="true" id="cartCount">0</div>
        </div>

        <button class="btn primary" id="cta-shop"><span>Nunua Sasa</span></button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero" id="home">
      <div class="hero-inner">
        <div>
          <div class="eyebrow" data-key="eyebrow">Fred's Stationary</div>
          <h2 class="title" data-key="heroTitle">Vifaa Bora vya Ofisi na Shule</h2>
          <p class="lead" data-key="heroDesc">Tunatoa bidhaa za ubora wa hali ya juu kwa ajili ya ofisi, shule na matumizi binafsi. Bei nafuu na huduma bora.</p>
          <div style="margin-top:1rem;display:flex;gap:.6rem">
            <button class="btn primary" id="heroShop"><span data-key="shopNow">Nunua Sasa</span></button>
            <a href="#products" class="btn" id="heroBrowse"><span data-key="viewProducts">Tazama Bidhaa</span></a>
          </div>
        </div>

        <figure class="hero-media" aria-hidden="true">
          <picture>
            <source media="(min-width:900px)" srcset="https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=1400&q=80">
            <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?auto=format&fit=crop&w=1000&q=60" alt="Office supplies on a desk" loading="lazy">
          </picture>
        </figure>
      </div>
    </section>

    <section id="categories" aria-labelledby="categories-title">
      <h3 id="categories-title" class="sr-only">Kategoria za Bidhaa</h3>
      <div class="categories" id="categoriesContainer"></div>
    </section>

    <section id="products" aria-labelledby="products-title">
      <h3 id="products-title" class="sr-only">Bidhaa Maalum</h3>
      <div class="products" id="productsGrid" role="list"></div>
    </section>
  </main>

  <!-- Admin floating panel (initially hidden) -->
  <div class="admin-panel" id="adminPanel" hidden aria-hidden="true">
    <header>
      <strong data-key="adminTitle">Dashibodi ya Msimamizi</strong>
      <div style="display:flex;gap:.5rem">
        <button class="btn" id="closeAdmin" aria-label="Funga">‚úñÔ∏è</button>
      </div>
    </header>

    <main style="margin-top:.75rem">
      <form id="productForm" aria-label="Add Product" style="display:grid;gap:.5rem">
        <input id="pName" placeholder="Jina la Bidhaa" required>
        <input id="pPrice" type="number" placeholder="Bei (TZS)" required>
        <select id="pCategory">
          <option value="pens">Kalamu na Penseli</option>
          <option value="books">Vitabu na Daftari</option>
          <option value="office">Vifaa vya Ofisi</option>
          <option value="printing">Vifaa vya Kuchapisha</option>
        </select>
        <input id="pImage" placeholder="URL ya Picha" required>
        <textarea id="pDesc" placeholder="Maelezo ya Bidhaa"></textarea>
        <div style="display:flex;gap:.5rem;justify-content:flex-end">
          <button class="btn" type="button" id="resetProducts">Reset</button>
          <button class="btn primary" type="submit">Ongeza Bidhaa</button>
        </div>
      </form>

      <div id="adminList" style="margin-top:.75rem;display:grid;gap:.5rem;max-height:260px;overflow:auto"></div>
    </main>
  </div>

  <footer class="container">
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;align-items:start">
      <div>
        <h4 data-key="aboutTitle">Kuhusu Fred's Stationary</h4>
        <p data-key="aboutDesc">Tunatoa vifaa bora vya ofisi na shule tangu 2015. Lengo letu ni kuhakikisha wateja wetu wanapata bidhaa za ubora wa hali ya juu kwa bei nafuu.</p>
      </div>
      <div>
        <h4>Viungo</h4>
        <ul style="list-style:none;padding:0;margin:0;display:grid;gap:.35rem">
          <li><a href="#home" data-key="home">Nyumbani</a></li>
          <li><a href="#products" data-key="products">Bidhaa Zote</a></li>
          <li><a href="#categories" data-key="categories">Kategoria</a></li>
        </ul>
      </div>
      <div>
        <h4 data-key="contactTitle">Mawasiliano</h4>
        <p><strong>Email:</strong> <a href="mailto:frediezra360@gmail.com">frediezra360@gmail.com</a><br><strong>Simu:</strong> +255 752 593 977</p>
      </div>
    </div>
    <div style="margin-top:1rem;text-align:center;color:var(--muted)">&copy; 2025 Fred's Stationary. <span data-key="rightsReserved">Haki zote zimehifadhiwa.</span></div>
  </footer>

  <!-- Product template -->
  <template id="productTemplate">
    <article class="product" role="listitem">
      <div class="img" data-img></div>
      <h4 data-name></h4>
      <div class="meta">
        <div class="price" data-price></div>
        <div style="display:flex;gap:.4rem">
          <button class="btn" data-action="view" aria-label="Tazama">üëÅÔ∏è</button>
          <button class="btn primary" data-action="cart" aria-label="Ongeza katika Cart">‚ûï</button>
        </div>
      </div>
      <p data-desc style="font-size:.9rem;color:var(--muted)"></p>
    </article>
  </template>

  <script type="module">
    // Modern module-based script: compact, accessible, and performant
    const translations = {
      sw: {
        home: 'Nyumbani', products: 'Bidhaa', categories: 'Kategoria', about: 'Kuhusu Sisi', contact: 'Mawasiliano',
        heroTitle: 'Vifaa Bora vya Ofisi na Shule', heroDesc: 'Tunatoa bidhaa za ubora wa hali ya juu kwa ajili ya ofisi, shule na matumizi binafsi. Bei nafuu na huduma bora.',
        shopNow: 'Nunua Sasa', viewProducts: 'Tazama Bidhaa',
        adminTitle: 'Dashibodi ya Msimamizi', aboutTitle: "Kuhusu Fred's Stationary",
        aboutDesc: 'Tunatoa vifaa bora vya ofisi na shule tangu 2015. Lengo letu ni kuhakikisha wateja wetu wanapata bidhaa za ubora wa hali ya juu kwa bei nafuu.',
        contactTitle: 'Mawasiliano', rightsReserved: 'Haki zote zimehifadhiwa.'
      },
      en: {
        home: 'Home', products: 'Products', categories: 'Categories', about: 'About Us', contact: 'Contact',
        heroTitle: 'Best Office and School Supplies', heroDesc: 'We provide high quality products for offices, schools and personal use. Affordable prices and excellent service.',
        shopNow: 'Shop Now', viewProducts: 'View Products',
        adminTitle: 'Admin Dashboard', aboutTitle: "About Fred's Stationary",
        aboutDesc: 'We have been providing quality office and school supplies since 2015.', contactTitle: 'Contact', rightsReserved: 'All rights reserved.'
      },
      fr: { /* minimal; left for later expansion */ }
    };

    const DEFAULT_PRODUCTS = [
      {id:1,name:'Kalamu ya Kawaida',price:500,category:'pens',image:'https://images.unsplash.com/photo-1583485088034-697b5bc54ccd?auto=format&fit=crop&w=800&q=80',description:'Kalamu nyeusi ya kawaida yenye mwendo mzuri wa kuandikia'},
      {id:2,name:'Daftari la Kujitabu',price:2500,category:'books',image:'https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&w=800&q=80',description:'Daftari zuri la kuratibia mawazo na kumbukumbu'},
      {id:3,name:'Mkoba wa Karatasi',price:15000,category:'office',image:'https://images.unsplash.com/photo-1586953208448-b95a79798f07?auto=format&fit=crop&w=800&q=80',description:'Mkoba wa karatasi wa ubora wa juu kwa ajili ya ofisi'},
      {id:4,name:'Rim ya Karatasi A4',price:18000,category:'printing',image:'https://images.unsplash.com/photo-1600220409220-49cb870d0c55?auto=format&fit=crop&w=800&q=80',description:'Rim ya karatasi A4 500 kurasa kwa ajili ya kuchapisha'}
    ];

    const storage = {
      get(key, fallback=null){ try { return JSON.parse(localStorage.getItem(key)) ?? fallback } catch(e){ return fallback } },
      set(key, val){ localStorage.setItem(key, JSON.stringify(val)) }
    };

    // state
    let products = storage.get('products', DEFAULT_PRODUCTS.slice());
    let cart = storage.get('cart', {});
    let lang = storage.get('lang','sw');

    // refs
    const productsGrid = document.getElementById('productsGrid');
    const template = document.getElementById('productTemplate');
    const cartCount = document.getElementById('cartCount');
    const adminPanel = document.getElementById('adminPanel');
    const adminToggle = document.getElementById('admin-toggle');
    const closeAdmin = document.getElementById('closeAdmin');
    const productForm = document.getElementById('productForm');
    const adminList = document.getElementById('adminList');
    const langSelect = document.getElementById('lang-select');

    // helpers
    function applyTranslations(){
      document.querySelectorAll('[data-key]').forEach(el=>{
        const key = el.getAttribute('data-key');
        const t = (translations[lang] && translations[lang][key]) || translations['sw'][key] || '';
        if(el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') el.placeholder = t;
        else el.textContent = t;
      });
    }

    function renderProducts(){
      productsGrid.innerHTML = '';
      const frag = document.createDocumentFragment();
      products.forEach(prod=>{
        const node = template.content.cloneNode(true);
        node.querySelector('[data-name]').textContent = prod.name;
        node.querySelector('[data-price]').textContent = `TZS ${prod.price.toLocaleString()}`;
        node.querySelector('[data-desc]').textContent = prod.description;
        node.querySelector('[data-img]').style.backgroundImage = `url(${prod.image})`;
        const article = node.querySelector('.product');
        article.dataset.id = prod.id;
        frag.appendChild(node);
      });
      productsGrid.appendChild(frag);
    }

    function updateCartCount(){
      const total = Object.values(cart).reduce((s,n)=>s+n,0);
      cartCount.textContent = total;
      storage.set('cart',cart);
    }

    function addToCart(id){
      cart[id] = (cart[id]||0)+1;
      updateCartCount();
    }

    function renderAdminList(){
      adminList.innerHTML = '';
      products.forEach(p=>{
        const el = document.createElement('div');
        el.style.display='flex';
        el.style.justifyContent='space-between';
        el.style.alignItems='center';
        el.style.gap='8px';
        el.innerHTML = `<div style="display:flex;gap:.5rem;align-items:center"><div style="width:40px;height:40px;background-image:url(${p.image});background-size:cover;border-radius:6px"></div><div><div style="font-weight:700">${p.name}</div><div style="font-size:12px;color:var(--muted)">TZS ${p.price.toLocaleString()}</div></div></div><div style="display:flex;gap:.4rem"><button class="btn" data-action="edit" data-id="${p.id}">Edit</button><button class="btn" data-action="delete" data-id="${p.id}">Delete</button></div>`;
        adminList.appendChild(el);
      });
    }

    // event delegation for product actions
    productsGrid.addEventListener('click', (e)=>{
      const btn = e.target.closest('button');
      if(!btn) return;
      const action = btn.dataset.action;
      const article = btn.closest('.product');
      const id = Number(article?.dataset?.id);
      if(action==='cart') addToCart(id);
      if(action==='view') {
        // minimal modal behavior (alert fallback)
        const p = products.find(x=>x.id===id);
        alert(`${p.name}\n\nTZS ${p.price.toLocaleString()}\n\n${p.description}`);
      }
    });

    // admin list actions
    adminList.addEventListener('click',(e)=>{
      const btn = e.target.closest('button'); if(!btn) return;
      const id = Number(btn.dataset.id);
      if(btn.dataset.action==='delete'){
        products = products.filter(p=>p.id!==id);
        storage.set('products',products);
        renderProducts(); renderAdminList();
      }
      if(btn.dataset.action==='edit'){
        const p = products.find(x=>x.id===id); if(!p) return;
        document.getElementById('pName').value=p.name;
        document.getElementById('pPrice').value=p.price;
        document.getElementById('pImage').value=p.image;
        document.getElementById('pDesc').value=p.description;
        document.getElementById('pCategory').value=p.category;
      }
    });

    // admin form submit
    productForm.addEventListener('submit',(e)=>{
      e.preventDefault();
      const name = document.getElementById('pName').value.trim();
      const price = Number(document.getElementById('pPrice').value);
      const image = document.getElementById('pImage').value.trim();
      const desc = document.getElementById('pDesc').value.trim();
      const category = document.getElementById('pCategory').value;
      if(!name||!price) return alert('Jaza jina na bei');
      const id = products.reduce((m,p)=>Math.max(m,p.id),0)+1;
      products.push({id,name,price,category,image,description:desc});
      storage.set('products',products);
      renderProducts(); renderAdminList(); productForm.reset();
    });

    // admin toggle
    adminToggle.addEventListener('click', ()=>{
      const opened = adminPanel.hidden;
      adminPanel.hidden = !opened;
      adminPanel.setAttribute('aria-hidden', String(!opened));
      adminToggle.setAttribute('aria-expanded', String(opened));
      if(opened) renderAdminList();
    });
    closeAdmin.addEventListener('click', ()=>{ adminPanel.hidden=true; adminPanel.setAttribute('aria-hidden','true'); adminToggle.setAttribute('aria-expanded','false'); });

    document.getElementById('resetProducts').addEventListener('click', ()=>{
      if(!confirm('Reset to defaults?')) return;
      products = DEFAULT_PRODUCTS.slice();
      storage.set('products',products);
      renderProducts(); renderAdminList();
    });

    // language selector
    langSelect.value = lang;
    langSelect.addEventListener('change',(e)=>{ lang = e.target.value; storage.set('lang',lang); applyTranslations(); });

    // initial render
    applyTranslations();
    renderProducts();
    renderAdminList();
    updateCartCount();

    // small UX: keyboard 'g' to go to products
    window.addEventListener('keydown', (e)=>{
      if(e.key==='g') document.getElementById('products').scrollIntoView({behavior:'smooth'});
    });

    // expose for debugging in console (dev only)
    window.__FEZ = { get products(){ return products }, get cart(){ return cart } };
  </script>
</body>
</html>
